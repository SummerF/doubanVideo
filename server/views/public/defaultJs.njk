<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="https://cdn.bootcss.com/dplayer/1.22.2/DPlayer.min.js"></script>
<script>
var player = null;
$(document).ready(function(){
	$('#myModal').on('hidden.bs.modal',function(){
		if(player && player.pause()){
			player.pause();
		}
	});

    $('.card-img-top').click(function(){
        var video = $(this).data('video');
        var image = $(this).attr('src');

		$('#myModal').modal('show');

        if(!player){
            player = new DPlayer({
                container:document.getElementById('videoModal'),
                screenshot:true,
                video:{
                    url: video,
                    pic: image,
                    thumbnails: image
                }
            })
        }else{
            if(player.video.currentSrc !== video){
                player.switchVideo({
                    url: video,
                    pic: image,
                    type: 'auto'
                });
            }
        }
    })
})
</script>